<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<!DOCTYPE html>
<html lang="ko">
<head>
<title>D-편한세상</title>

<!-- 폰트 -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">

		<style>
		
		html, body {
		  height: 100%;
		  font-family: 'Noto Sans KR', sans-serif;
		  background: #000;
		  overflow-x: hidden;
		}
		
		/* 배경 영상 */
		.bg video {
		  position: fixed;
		  top: 0;
		  left: 0;
		  width: 100vw;
		  height: 100vh;
		  object-fit: cover;
		  z-index: 0;
		}
		
		/* 오른쪽 버튼 영역 */
		.side-accordion {
		  position: fixed;
		  top: 50%;
		  right: 0;
		  transform: translateY(-50%);
		  display: flex;
		  flex-direction: column;
		  gap: 5px;
		  z-index: 3; /* ✅ 버튼이 패널보다 위로 오도록 */
		}
		
		/* 버튼 스타일 */
		.side-btn {
		  writing-mode: vertical-rl;
		  text-orientation: mixed;
		  background: rgba(255,255,255,0.9);
		  color: #333;
		  font-weight: 700;
		  border: none;
		  cursor: pointer;
		  width: 40px;
		  height: 120px;
		  border-radius: 10px 0 0 10px;
		  transition: all 0.3s ease;
		}
		
		.side-btn:hover {
		  background: #ff6a00;
		  color: #fff;
		}
		
		.side-btn.active {
		  background: #ff6a00;
		  color: #fff;
		  box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
		}
		
		/* 공통 패널 */
		.side-panel {
		  position: fixed;
		  right: -470px;
		  top: 38%;                      /* ✅ 중앙보다 약간 위쪽 */
		  transform: none;
		  width: 400px;
		  height: auto;
		  max-height: 90vh;
		  background: rgba(0, 0, 0, 0.75);
		  backdrop-filter: blur(10px);
		  border-radius: 16px 0 0 16px;
		  padding: 40px 30px;
		  transition: right 0.4s ease;
		  z-index: 10;
		}
		
		.side-panel.active {
		  right: 80px;
		}
		
		/* 내용 공통 */
		.side-panel h3 {
		  margin-top: 0;
		  font-size: 1.3rem;
		  font-weight: 700;
		  border-bottom: 1px solid rgba(255,255,255,0.2);
		  padding-bottom: 8px;
		  margin-bottom: 20px;
		  color: #fff;
		}
		
		/* 로그인 */
		.field { margin-bottom: 14px; }
		
		.field input {
		  width: 100%;
		  padding: 12px;
		  border: none;
		  border-radius: 8px;
		  font-size: 14px;
		}
		
		.actions {
		  display: flex;
		  gap: 8px;
		}
		
		.btn {
		  flex: 1;
		  padding: 10px 0;
		  border: none;
		  border-radius: 8px;
		  font-weight: 700;
		  cursor: pointer;
		}
		
		.btn.submit { background: #ff6a00; color: #fff; }
		.btn.submit:hover { background: #e95c00; }
		.btn.secondary { background: #e0e0e0; color: #333; }
		.btn.secondary:hover { background: #ccc; }
		
		/* 공지 / 입찰 리스트 */
		.list { display: grid; gap: 10px; }
		
		.item {
		  display: flex;
		  justify-content: space-between;
		  align-items: center;
		}
		
		.badge {
		  font-size: 12px;
		  font-weight: 700;
		  padding: 2px 6px;
		  border-radius: 999px;
		  color: #fff;
		}
		
		.badge.notice { background: #ff6a00; }
		.badge.bid { background: #ff6a00; }
		
		.title a {
		  color: #fff;
		  text-decoration: none;
		  font-size: 13px;
		  max-width: 180px;
		  white-space: nowrap;
		  overflow: hidden;
		  text-overflow: ellipsis;
		}
		
		.date {
		  font-size: 12px;
		  color: rgba(255,255,255,0.8);
		}
		
		.more-links {
		  margin-top: 12px;
		  text-align: right;
		}
		
		.more-links a {
		  color: #fff;
		  font-size: 13px;
		  text-decoration: none;
		}
		
		.more-links a:hover { color: #ff6a00; }
		
		/* 푸터 */
		footer {
		  position: absolute;
		  bottom: 15px;
		  width: 100%;
		  text-align: center;
		  color: rgba(255,255,255,0.6);
		  font-size: 12px;
		}
		
		
		/* 로그인 패널만 세로 길이 줄이기 */
		#login.side-panel {
		  top: 50%;                       /* 화면 중앙 정렬 */
		  transform: translateY(-50%);    /* 위아래 가운데 정렬 */
		  height: auto;                   /* ✅ 내용에 맞게 자동 조정 */
		  max-height: 90vh;               /* 너무 커지면 제한 */
		  border-radius: 16px 0 0 16px;   /* 살짝 둥글게 하면 깔끔 */
		}
		
		</style>
		</head>
		
		<body>
		
		<!-- 배경 동영상 -->
		<div class="bg">
		  <video autoplay muted loop playsinline>
		    <source src="/video/intro.mp4" type="video/mp4">
		  </video>
		</div>
		
		<!-- 오른쪽 버튼 -->
		<div class="side-accordion">
		  <button class="side-btn" data-target="login">로그인</button>
		  <button class="side-btn" data-target="notice">공지사항</button>
		  <button class="side-btn" data-target="bid">입찰공고</button>
		</div>
		
		<!-- 오른쪽 패널 (슬라이드 아코디언) -->
		<div class="side-panel" id="login">
		  <h3>로그인</h3>
		  <form action="/login" method="POST">
		    <div class="field"><input type="text" name="username" placeholder="아이디" required></div>
		    <div class="field"><input type="password" name="password" placeholder="비밀번호" required></div>
		    <div class="actions">
		      <button type="submit" class="btn submit">로그인</button>
		      <button type="button" class="btn secondary" onclick="location.href='/signup'">회원가입</button>
		    </div>
		  </form>
		</div>
		
		<div class="side-panel" id="notice">
		  <h3>공지사항</h3>
		  <div class="list">
		    <c:forEach var="noticeVO" items="${noticeVOList}">
		      <div class="item">
		        <span class="badge notice">공지</span>
		        <span class="title"><a href="/notice/wnmpy_notice">${noticeVO.noticeSj}</a></span>
		        <span class="date"><fmt:formatDate value="${noticeVO.noticeWritngDt}" pattern="MM/dd"/></span>
		      </div>
		    </c:forEach>
		  </div>
		  <div class="more-links"><a href="/notice/wnmpy_notice">더보기 ></a></div>
		</div>
		
		<div class="side-panel" id="bid">
		  <h3>입찰공고</h3>
		  <div class="list">
		    <c:forEach var="bidPblancVO" items="${bidPblancVOList}">
		      <div class="item">
		        <span class="badge bid">입찰</span>
		        <span class="title"><a href="/bidPblanc/getBidPblancList">${bidPblancVO.bidSj}</a></span>
		        <span class="date"><fmt:formatDate value="${bidPblancVO.pblancDt}" pattern="MM/dd"/></span>
		      </div>
		    </c:forEach>
		  </div>
		  <div class="more-links"><a href="/bidPblanc/getBidPblancList">더보기 ></a></div>
		</div>
		
		<footer>ⓒ D-편한세상. All rights reserved.</footer>
		
		<script>
		const buttons = document.querySelectorAll('.side-btn');
		const panels = document.querySelectorAll('.side-panel');
		
		buttons.forEach(btn => {
		  btn.addEventListener('click', () => {
		    const target = document.getElementById(btn.dataset.target);
		    const isActive = target.classList.contains('active');
		    panels.forEach(p => p.classList.remove('active'));
		    buttons.forEach(b => b.classList.remove('active'));
		    if (!isActive) {
		      target.classList.add('active');
		      btn.classList.add('active');
		    }
		  });
		});
		</script>
		
		</body>
		</html>