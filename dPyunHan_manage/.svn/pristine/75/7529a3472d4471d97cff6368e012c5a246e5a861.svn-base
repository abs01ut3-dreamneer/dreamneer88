<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<!DOCTYPE html>
<html>
<head>
<title></title>

<script>

 document.addEventListener("DOMContentLoaded", function(){
	 
	 const cmmntyChsttuSelect = document.getElementById("cmmntyChcksttus");
		
	// 커뮤니티 상태 변경 시 
	
    cmmntyChsttuSelect.addEventListener("change",function(){

	    const selectedValue = this.value;
	    
	    console.log("selectedValue:",selectedValue);
	    
	}); //end fcltySttusSelect
		
				
	const okButton = document.querySelector("#ok");

	okButton.addEventListener("click",function(){  //수정 버튼을 누르면
 	  
   
    let updateId = document.querySelector("#cmmntySn");
	
	const cmmntyChcksttus = document.querySelector("#cmmntyChcksttus").value;
	const cmmntyChckDt = document.querySelector("#cmmntyChckDt").value;
	const cmmntySn = document.querySelector("#cmmntySn").value;
	const cmmntyNm = document.querySelector("#cmmntyNm").value;
	
    let nhs ={
      "cmmntyChcksttus":cmmntyChcksttus,
      "cmmntyChckDt":cmmntyChckDt,
      "cmmntySn":cmmntySn,
      "cmmntyNm":cmmntyNm
      
    }
   
    console.log("nhs(커뮤니티): ",nhs); 

    fetch("/cmmnty/cmmntyupdatePost",{
    	method:"post",
        headers:{'Content-Type':"application/json;charset=utf-8"},
        body: JSON.stringify(nhs)
      })
      .then(response=>{
    	  return response.json();
      })
      .then(data=>{
    	  console.log("/cmmnty/cmmntyupdatePost data:",data);
        if(data>0){
    	  parent.location.href="/cmmnty/cmmntylist"
        };
      })
      .catch(error=>{
    	  console.log("error:",error);
      })
  });
	
	
	  const deleteBtn =  document.querySelector("#remove");

	  deleteBtn.addEventListener("click",function(){ //삭제버튼을 누르면
	           alert("정말 삭제하시겠습니까?");
	  });

	});
	



</script>

</head>
<body>


<!--// body 시작 //-->

<form action="/cmmnty/cmmntyupdatePost" method="post">

		<table>
			
			<tr>
				<th>커뮤니티 이름</th>
				<td>
                   <select id="cmmntyNm" name="cmmntyNm" style="margin-left:30px; width:200px;" disabled > 
                     <option value="">---선택하세요---</option>                  
                     <option value="헬스장">헬스장</option>                  
                     <option value="사우나">사우나</option>                  
                     <option value="골프장">골프장</option>                  
                     <option value="탁구장">탁구장</option>                  
                     <option value="독서실">독서실</option>                                 
                    </select>                
                </td>
			</tr>

			<tr>
				<th>커뮤니티 상태</th>
				<td>
                   <select id="cmmntyChcksttus" name="cmmntyChcksttus" style="margin-left:30px; width:200px;" >
                     <option value="">---선택하세요---</option>                      
                     <option value="정상">정상</option>                      
		             <option value="점검예정">점검예정</option>                      
		             <option value="점검완료">점검완료</option>                                            
		             <option value="점검중">점검중</option>                                                                            
                    </select>                
                </td>
			</tr>

			<tr>
				<th>최근 점검일자</th> 			
				<td>
				  <input type="date" id="cmmntyChckDt" name="cmmntyChckDt" style="margin-left:30px; width:200px;" value="<fmt:formatDate value='${CmmntyVO.cmmntyChckDt}' pattern='yyyy-MM-dd' />" /> 
				</td>   
			</tr>
		</table>
		<button type="button" id="ok" class="btn btn-secondary" style="margin-top:20px;">수정</button>
		<button type="button" id="remove" class="btn btn-danger" style="margin-top:20px; margin-left:5px;">삭제</button>
		<button type="reset" id="cancel" class="btn btn-warning" style="margin-top:20px; margin-left:5px;">취소</button>
	</form>
	<hr />

<!--// body 끝 //-->


</body>
</html>