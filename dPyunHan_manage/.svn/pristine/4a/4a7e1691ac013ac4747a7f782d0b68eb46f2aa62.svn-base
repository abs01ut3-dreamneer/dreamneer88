<!-- JPS로 출력하는거. (미완성이니까 참고만) -->
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

	<!-- /// header 시작  -->
	<%@ include file="../include/header.jsp" %>
		<!-- /// header 끝 /// -->
		<!-- body시작은 header 에서부터  -->
<%-- 		${voteMtrVO2} --%>

		<section class="content" style="margin: 20px">
			<div class="container-fluid">
				<div class="row mb-2">
					<div class="col-sm-12">
  						<!-- 20251103검색기능 추가 -->
						<div id="example1_filter" class="dataTables_filter" style="float: right;">
						  <form id="frm" name="frm" action="/vote/voteMtr" method="get" class="form-inline">
						    <!-- 초기화 -->
						    <input type="hidden" name="currentPage" value="1" />
						    <!-- 키워드 -->
						    <label class="mr-2 mb-0">
						      <input type="search" name="keyword"
						             class="form-control form-control-sm"
						             placeholder="검색어(제목/내용)"
						             value="${fn:escapeXml(param.keyword)}"
						             aria-controls="example1" />
						    </label>
						
						    <!-- 기간 -->
						    <label class="mr-2 mb-0">
						      <input type="date" name="periodFrom"
						             class="form-control form-control-sm"
						             value="${param.periodFrom}" />
						    </label>
						    <span class="mr-2">~</span>
						    <label class="mr-2 mb-0">
						      <input type="date" name="periodTo"
						             class="form-control form-control-sm"
						             value="${param.periodTo}" />
						    </label>
						
						    <!-- 상태 -->
						    <label class="mr-2 mb-0">
						      <select name="stat" class="form-control form-control-sm">
						        <option value=""        ${empty param.stat ? 'selected' : ''}>전체</option>
						        <option value="진행중"   ${param.stat eq '진행중' ? 'selected' : ''}>진행중</option>
						        <option value="대기"    ${param.stat eq '예정'   ? 'selected' : ''}>예정</option>
						        <option value="마감"    ${param.stat eq '마감'   ? 'selected' : ''}>마감</option>
						      </select>
						    </label>
						
						    <!-- 검색/초기화 -->
						    <button type="submit" class="btn btn-info btn-sm mr-2">검색</button>
						    <a href="/vote/voteMtr" class="btn btn-default btn-sm">초기화</a>
						  </form>
						</div>
  						<!-- 20251103검색기능 추가 -->

					</div>
				</div>
			<div class="container">
				<h3 class="class="card-title">투표 목록</h3>
			</div>
				<div class="row">
					<div class="col-md-12">
						<!-- 카드 시작 -->
						<div class="card">
							<div class="card-body">
								<table style="border-collapse: collapse; border: none; width: 100%;">
									<thead>
										<tr>
											<th style="width:10%; text-align: center;">글번호</th>
											<th>제목</th>	
											<th style="width: 10%; text-align: center;">투표 시작시간</th>
											<th style="width: 10%; text-align: center;">투표 마감시간</th>
											<th style="width: 10%; text-align: center;">작성자ID</th>
											<th style="width: 10%; text-align: center;">상태</th>
										</tr>
									</thead>
									<tbody>



										<c:forEach var="p" items="${articlePage.content}" varStatus="stat">
											<tr>
												<td style="text-align: center;"><a href="/vote/voteDetail?voteMtrSn=${p.voteMtrSn}">[${p.voteMtrSn}]</a></td>
												<td><a href="/vote/voteDetail?voteMtrSn=${p.voteMtrSn}"><c:out value="${p.mtrSj}" /></a></td>
												<td style="text-align: center;">
													${fn:substring(p.voteBeginDt, 0, 10)}
												</td>
												<td style="text-align: center;">
													${fn:substring(p.voteEndDt, 0, 10)}
												</td>
												<td style="text-align: center;">
													<c:out value="${p.empId}" />
												</td>
												<td style="text-align: center;">
													<!-- 상태 별 색 추가 업데이트 2025-11-01 -->
													<c:choose>
													  <c:when test="${p.stat eq '진행중'}">
													    <span class="badge badge-success">${p.stat}</span>
													  </c:when>
													  <c:when test="${p.stat eq '예정'}">
													    <span class="badge badge-secondary">${p.stat}</span>
													  </c:when>
													  <c:when test="${p.stat eq '마감'}">
													    <span class="badge badge-warning">${p.stat}</span>
													  </c:when>
													  <c:otherwise>
													    <span class="badge badge-light">${p.stat}</span>
													  </c:otherwise>
													</c:choose>
														
														</td>
											</tr>
										</c:forEach>
									</tbody>
								</table>
							</div>
						<div style="text-align: right;"><a href="/vote/addVotePage" class="btn btn-info btn-sm" >등록하기</a></div>

							<div class="card-footer clearfix">${articlePage.pagingArea}</div>
						</div>
						<!-- 카드 끝 -->
					</div>
				</div>
			</div>
		</section>

		<!-- /// body 끝 /// -->
		<!-- /// footer 시작  -->
		<%@ include file="../include/footer.jsp" %>
			<!-- /// footer 끝 /// -->