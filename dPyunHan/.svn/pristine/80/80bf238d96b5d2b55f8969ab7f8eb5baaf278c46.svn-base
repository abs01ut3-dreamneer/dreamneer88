<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<!-- í—¤ë” -->
<script>
    const prc = "${pageContext.request.contextPath}";
</script>
<style>
h2 {
    font-size: 1.5rem !important;
    font-weight: 700;
}

.title-row h2 {
    display: inline-flex;
    align-items: center;
    margin: 0;
    padding: 0;
    line-height: 1;
}

#resve1 .title-row h2::after {
    content: "";
    display: block;
    width: 152px !important;
    height: 2px;
    background: #ff4a17;
    margin: 0;
}

.title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.title-row button {
    margin-left: auto !important;
    margin-right: 0 !important;
}
/**/

#calender .title-row h2::after {
    content: "";
    display: block;
    width: 275px !important;
    height: 2px;
    background: #ff4a17;
    margin: 0;
}

#levy .title-row h2::after {
    content: "";
    display: block;
    width: 384px !important;
    height: 2px;
    background: #ff4a17;
    margin: 0;
}

#notice .title-row h2::after {
    content: "";
    display: block;
    width: 176px !important;
    height: 2px;
    background: #ff4a17;
    margin: 0;
}

#vote .title-row h2::after {
    content: "";
    display: block;
    width: 224px !important;
    height: 2px;
    background: #ff4a17;
    margin: 0;
}

#visitVhcle .title-row h2::after {
    content: "";
    display: block;
    width: 180px !important;
    height: 2px;
    background: #ff4a17;
    margin: 0;
}

.footer-info .social-links .ms-auto a:hover,
.footer-info .credits a:hover {
    color: #124A8B !important;
}
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<%@include file="./include/headerContents.jsp"%>
<!-- Testimonials Section -->
<section id="home" style="padding:0px;"></section>
<section id="testimonials" class="testimonials section dark-background">
<c:set var="hshldId" value="${mberVO.hshldId}" scope="session" />
   <link rel="stylesheet" href="/css/main/swiper.css">
   <script type="text/javascript" src="/js/main/swiper.js"></script>
   <link href="/dewi/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

   <div class="container" data-aos="fade-up" data-aos-delay="100">
      <div class="swiper testimonial-swiper">
         <div class="swiper-wrapper">
            <div class="swiper-slide">
               <div class="testimonial-item">
                  <img src="images/mainBanner/hello.png" alt="ì•ˆë…•í•˜ì„¸ìš”">
               </div>
            </div>
            <div class="swiper-slide">
               <div class="testimonial-item">
                  <img src="images/mainBanner/newYear.png" alt="ìƒˆí•´ì¸ì‚¬">
               </div>
            </div>
            <div class="swiper-slide">
               <div class="testimonial-item">
                  <a href="/bbs/board/2"> <img src="images/mainBanner/danggunPost.png"
                     alt="ë‹¹ê·¼ ê²Œì‹œë¬¼" style="height: 250px; weight: 475px">
                  </a>
               </div>
            </div>
            <div class="swiper-slide">
               <div class="testimonial-item">
                  <img src="images/mainBanner/recycling.png" alt="ë¶„ë¦¬ìˆ˜ê±°">
               </div>
            </div>
         </div>
         <div class="swiper-pagination"></div>
      </div>
   </div>
</section>
<!-- /Testimonials Section -->

<!-- ===== ìµœê·¼ ê³µì§€ì‚¬í•­ ìŠ¬ë¼ì´ë“œ ===== -->
<section id="noticeBanner" class="light-background" style="padding: 10px 0;">
  <div class="notice-line-wrapper" data-aos="fade-up">

    <!-- ì¢Œì¸¡ ì´ëª¨í‹°ì½˜ -->
    <span class="notice-icon">ğŸ“¢</span>

    <!-- ìŠ¬ë¼ì´ë” -->
    <div class="swiper notice-line-swiper">
      <div class="swiper-wrapper">
        <c:forEach var="n" items="${articlePage.content}">
          <div class="swiper-slide">
            <div class="notice-line-item" data-notice-sn="${n.noticeSn}">
              <span class="notice-title">${n.noticeSj}</span>
              <span class="notice-date">
                <fmt:formatDate value="${n.noticeWritngDt}" pattern="yyyy-MM-dd" />
              </span>
            </div>
          </div>
        </c:forEach>
      </div>
    </div>

    <!-- ìš°ì¸¡ ì´ëª¨í‹°ì½˜ -->
    <span class="notice-icon">ğŸ“¢</span>

  </div>
</section>

<!-- ///// ê´€ë¦¬ë¹„ ì¡°íšŒSECTION ì‹œì‘ ///// -->
<section id="levy" class="services-2 section light-background">
    <div class="container section-title" data-aos="fade-up" style="padding-bottom: 15px;">
    <div class="title-row">
        <h2>ê´€ë¦¬ë¹„</h2>
        </div>
    </div>
    
    <!-- ê´€ë¦¬ë¹„ ì¡°íšŒ, ë‚©ë¶€ -->
    <div class="container-fluid" data-aos="fade-up" data-aos-delay="120">
        <div class="row justify-content-center gy-4">
            <div class="col-12 col-md-12">
                <div class="manage-container"> 
                    <div class="service-item manage-card">
                        <div class="details position-relative">
                            <div class="manage-wrapper">
                                
                                <form>
                                    <label class="form-label me-2">ì¡°íšŒ ì—°ì›”:</label>
                                    <input type="month" id="searchYm" name="ym" value="${yearMonth}"
                                        class="form-control form-control-sm d-inline-block">
                                    <input type="hidden" name="hshldId" value="${hshldId}" />
                                      <input type="hidden" name="mberNm" value="${mberVO.mberNm}" />
                                      <input type="hidden" name="email" value="${mberVO.email}" />
            
                                    
                                    <button type="button" data-sn="${rq.rqestSn}" id="searchBtn"
                                        class="btn btn-primary btn-sm ms-2">
                                        <i class="fas fa-search"></i> ì¡°íšŒ
                                    </button>
                                    <button type="button" data-sn="${rq.rqestSn}" id="predictBtn"
                                        class="btn btn-primary btn-sm ms-2">
                                        <i class="fas fa-search"></i> ì˜ˆì¸¡
                                    </button>
                                </form>

                                <div id="rqestResult" class="mt-3">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<%--     
    <!-- ê´€ë¦¬ë¹„ ì˜ˆì¸¡ -->
    <div class="container-fluid" data-aos="fade-up" data-aos-delay="120">
        <div class="row justify-content-center gy-4">
            <div class="col-12 col-md-12">
                <div class="manage-container"> 
                    <div class="service-item manage-card">
                        <div class="details position-relative">
                            <div class="manage-wrapper">
                                
                                <form>
                                    <label class="form-label me-2">ì˜ˆì¸¡ ì—°ì›”</label>
                                    <input type="month" id="searchYm" name="ym" value="${yearMonth}"
                                        class="form-control form-control-sm d-inline-block">
                                    <input type="hidden" name="hshldId" value="${hshldId}" />
                                    
                                    <button type="button" data-sn="${rq.rqestSn}" id="searchBtn"
                                        class="btn btn-primary btn-sm ms-2">
                                        <i class="fas fa-search"></i> ì˜ˆì¸¡
                                    </button>
                                </form>

                                <div id="rqestResult" class="mt-3">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> --%>
</section>
<!-- ///// ê´€ë¦¬ë¹„ ì¡°íšŒSECTION ë ///// -->

<!-- ///// ì¼ì • ì¡°íšŒ ì‹œì‘ ///// -->
<!-- Section -->
<section id="calender" class="noticeSection light-background">
   <div class="container section-title" data-aos="fade-up" style="padding-bottom: 15px;">
   <div class="title-row">
      <h2>ìš°ë¦¬ ì•„íŒŒíŠ¸ ì¼ì •</h2>
      </div>
   </div>
   <div class="container-fluid" data-aos="fade-up" data-aos-delay="120">
      <div class="row justify-content-center gy-4">
         <div class="col-12 col-md-12">
            <div class="service-item manage-card">
               <div class="details position-relative">
                  <div class="manage-wrapper">
                     <div id="Wrapper">
                        <div id="calendar"></div>
                     </div>
                     <!--ìƒì„¸ë³´ê¸° ëª¨ë‹¬ ì‹œì‘-->
                     <input type="hidden" id="detailschdulSn" name="detailschdulSn"
                        value="${fxVO.schdulSn}" />
                  </div>
               </div>
            </div>
         </div>
      </div>
</section>

<!-- /// ìº˜ë¦°ë” ëª¨ë‹¬ ì‹œì‘ /// -->
<div class="modal fade cute-modal" id="calendarModal" tabindex="-1" aria-labelledby="calendarModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <!-- í—¤ë” -->
      <div class="modal-header">
        <h5 class="modal-title" id="calendarModalLabel" style="font-size:0.95rem; margin:0;">
          ì¼ì • ìƒì„¸ ë³´ê¸°
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
      </div>

      <!-- ë°”ë”” -->
      <div class="modal-body">
        <form id="detailscheduleForm">
          <!-- ìˆ¨ê²¨ì§„ ë‹´ë‹¹ì ì •ë³´ (JS ìœ„í•´ ìœ ì§€) -->
          <input type="hidden"
                 id="calendarempId"
                 name="calendarempId"
                 class="form-control form-control-sm" />

          <div class="task-panel">

            <!-- ì¹´ë“œ 1: ì œëª© + ì‹œì‘/ì¢…ë£Œ + ì¥ì†Œ -->
            <div class="calendar-main-card">
              <!-- ì œëª© -->
              <div class="calendar-row">
                <div class="calendar-field-label">ì œëª©</div>
                <input type="text"
                       id="calendarSj"
                       name="calendarSj"
                       class="form-control form-control-sm"
                       readonly />
              </div>

              <!-- êµ¬ë¶„ (ë°ì´í„°ìš©, í™”ë©´ì—ì„œ ìˆ¨ê¹€) -->
              <div class="calendar-row" style="display:none;">
                <div class="calendar-field-label">êµ¬ë¶„</div>
                <select id="calendarIem"
                        name="calendarIem"
                        class="form-control form-control-sm">
                  <option value="">ì„ íƒ</option>
                  <option value="ì‹œì„¤">ì‹œì„¤</option>
                  <option value="ì»¤ë®¤ë‹ˆí‹°">ì»¤ë®¤ë‹ˆí‹°</option>
                  <option value="ê°œì¸ì¼ì •">ê°œì¸ì¼ì •</option>
                </select>
              </div>

              <!-- ì‹œì‘/ì¢…ë£Œ ì¼ì‹œ -->
              <div class="calendar-row">
                <div class="calendar-field-inline-grid">
                  <div>
                    <span class="calendar-field-label-sub">ì‹œì‘ì¼ì‹œ</span>
                    <input type="datetime-local"
                           id="calendarBeginDt"
                           name="calendarBeginDt"
                           class="form-control form-control-sm"
                           readonly />
                  </div>
                  <div>
                    <span class="calendar-field-label-sub">ì¢…ë£Œì¼ì‹œ</span>
                    <input type="datetime-local"
                           id="calendarEndDt"
                           name="calendarEndDt"
                           class="form-control form-control-sm"
                           readonly />
                  </div>
                </div>
              </div>

              <!-- ì¥ì†Œ -->
              <div class="calendar-row">
                <div class="calendar-field-label">ì¥ì†Œ</div>
                <input type="text"
                       id="calendarPlace"
                       name="calendarPlace"
                       class="form-control form-control-sm"
                       readonly />
              </div>
            </div>

            <!-- ì¹´ë“œ 2: ë‚´ìš© -->
            <div class="calendar-main-card mb-0">
              <div class="calendar-section-title">ë‚´ìš©</div>
              <textarea id="calendarCn"
                        name="calendarCn"
                        class="form-control form-control-sm"
                        rows="3"
                        style="resize:none;"
                        readonly></textarea>
            </div>

          </div>
        </form>
      </div>

      <!-- í‘¸í„° -->
      <div class="modal-footer">
        <!-- í•„ìš”í•˜ë©´ ë²„íŠ¼ ì¶”ê°€ -->
      </div>

    </div>
  </div>
</div>
<!--ìº˜ë¦°ë” ëª¨ë‹¬ ë-->
<!-- ì¼ì • Sectionë -->

<!-- /////////////////////////ì‹œì„¤ ì˜ˆì•½///////////////////////// -->
<section id="resve1" class="services-2 section light-background">
   <!-- Section Title -->
	<div class="container section-title" data-aos="fade-up" style="padding-bottom: 15px;">
   <div class="title-row">
	      <h2>í¸ì˜ì‹œì„¤ ì˜ˆì•½</h2>
	      <button type="button" class="btn btn-success open-resvember-btn"
	         style="background-color: rgba(135, 163, 179, 0.7); border: 2px solid rgb(135, 163, 179);">
	         ë‚´ ì˜ˆì•½ í˜„í™© ë³´ê¸°</button>
	   </div>
   </div>
   <!-- End Section Title -->

   <div class="container">
      <div class="row gy-4">
         <!-- 1~4 ì¹´ë“œ -->
         <c:forEach var="cmmntyVO" items="${cmmntyVOList}" varStatus="stat">
            <c:if test="${stat.count <= 9}">
               <div class="col-md-4" data-aos="fade-up"
                  data-aos-delay="${stat.count * 100}">
                  <div class="service-item d-flex position-relative h-100 js-resve-card"
                     data-cmmntysn="${cmmntyVO.cmmntySn}" role="button" tabindex="0" style="cursor: pointer;">

                     <div>
                        <h4 class="title">
                           <a href="#" class="stretched-link">${cmmntyVO.cmmntyNm}</a>
                        </h4>
                        <p class="description mb-2">
                           <strong>ì´ ìˆ˜ìš©ì¸ì›:</strong> ${cmmntyVO.totAceptncNmpr}<br><br>
                           <strong>ìš´ì˜ì‹œê°„</strong><br>${cmmntyVO.cmmntyOpnVwpoint} ~ ${cmmntyVO.cmmntyClosVwpoint}
                        </p>
                        <!-- ìˆ¨ê¹€ ë²„íŠ¼ -->
                        <button type="button" class="open-resve-btn d-none" data-cmmntysn="${cmmntyVO.cmmntySn}">ì˜ˆì•½</button>
                     </div>
                  </div>
               </div>
            </c:if>
         </c:forEach>
      </div>
   </div>
</section>

<!-- ì˜ˆì•½ ëª¨ë‹¬ -->
<div class="modal fade cute-modal" id="resveModal" tabindex="-1" aria-hidden="true" >
   <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">ì˜ˆì•½</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
         </div>
         <div class="modal-body" id="modalResveContent">
            <p class="text-center text-muted">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">ì·¨ì†Œ</button>
            <button type="button" class="btn btn-primary" onclick="submitReservation()">ì˜ˆì•½</button>
         </div>
      </div>
   </div>
</div>

<!-- ì˜ˆì•½í˜„í™© ëª¨ë‹¬ -->
<div class="modal fade cute-modal" id="resveMberModal" tabindex="-1" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
      <div class="modal-content">
     <!-- ëª¨ë‹¬ ì „ìš© ìŠ¤í¬ë¡¤ ìŠ¤íƒ€ì¼ (ì´ ëª¨ë‹¬ ì•ˆì—ì„œë§Œ ì ìš©ë¨) -->
         <style>
            #resveMberModal .modal-body::-webkit-scrollbar {
                width: 8px !important;
                height: 8px !important;
            }
            #resveMberModal .modal-body::-webkit-scrollbar-track {
                background: #f1f1f1 !important;
                border-radius: 8px !important;
            }
            #resveMberModal .modal-body::-webkit-scrollbar-thumb {
                background: #F66214 !important;
                border-radius: 8px !important;
            }
            #resveMberModal .modal-body::-webkit-scrollbar-thumb:hover {
                background: #e06626 !important;
            }
         </style>
      
         <div class="modal-header">
            <h5 class="modal-title">ë‚´ ì˜ˆì•½ í˜„í™©</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
         </div>
         <div class="modal-body" id="modalMberContent" style="max-height:70vh !important; overflow-y:auto !important; scrollbar-width:auto !important; -ms-overflow-style:auto !important;">

            <!-- íƒ­ ë²„íŠ¼ -->
            <ul class="nav nav-pills" id="resveTabs">
               <li class="nav-item"><button class="nav-link active" data-tab="all">ì „ì²´</button></li>
               <li class="nav-item"><button class="nav-link" data-tab="plan">ë°©ë¬¸ ì˜ˆì •</button></li>
               <li class="nav-item"><button class="nav-link" data-tab="success">ë°©ë¬¸ ì™„ë£Œ</button></li>
               <li class="nav-item"><button class="nav-link" data-tab="cancel">ì·¨ì†Œ</button></li>
            </ul>

            <!-- ë‹¨ì¼ í…Œì´ë¸” (í—¤ë” ê³ ì •) -->
            <table class="table table-striped align-middle text-center mt-3">
               <thead class="table-dark">
                  <tr>
                     <th>ë²ˆí˜¸</th>
                     <th>ì»¤ë®¤ë‹ˆí‹°ì‹œì„¤</th>
                     <th>ì˜ˆì•½ ë‚ ì§œ</th>
                     <th>ì˜ˆì•½ ì‹œê°„</th>
                     <th>ì¸ì› ìˆ˜</th>
                     <th>ì˜ˆì•½ ìƒíƒœ</th>
                  </tr>
               </thead>
               <tbody id="resveTabBody">
                  <tr>
                     <td colspan="6" class="text-muted py-3">ì˜ˆì•½ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                  </tr>
               </tbody>
            </table>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">ë‹«ê¸°</button>
         </div>
      </div>
   </div>
</div>

<!-- ì˜ˆì•½ìƒì„¸ ëª¨ë‹¬ -->
<div class="modal fade cute-modal" id="resveMberDetailModal" tabindex="-1" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">ë‚´ ì˜ˆì•½ ìƒì„¸</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
         </div>
         <div class="modal-body" id="modalMberDetailContent">
            <p class="text-center text-muted">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">ë‹«ê¸°</button>
            <button type="button" class="btn btn-warning" onclick="resveCancel()">ì˜ˆì•½ ì·¨ì†Œ</button>
         </div>
      </div>
   </div>
</div>
<!-- /////////////////////////////ì˜ˆì•½ë///////////////////////////// -->

<!-- //////////////////////////ê³µì§€ Section//////////////////////////// -->
<!-- ////////////////ê³µì§€ Sectionë////////////////// -->

<!-- visitVhcle Section -->
<section id="visitVhcle" class="services-2 section light-background">
  <div class="container section-title" data-aos="fade-up" style="padding-bottom: 15px;">
    <div class="title-row">
    <h2>ë°©ë¬¸ì°¨ëŸ‰ì˜ˆì•½</h2>
    <div class="text-start">
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#reserveModal"
              style="background-color: rgba(135, 163, 179, 0.7); border: 2px solid rgb(135, 163, 179);">
        ë°©ë¬¸ ì°¨ëŸ‰ ì˜ˆì•½
      </button>
    </div>
    </div>
  </div>

  <div class="visit-time-card">
    <div class="visit-time-info">
      <p class="monthly-limit">
        ì„¸ëŒ€ë³„ ì›” ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ì€ <span class="highlight">120ì‹œê°„</span> ì…ë‹ˆë‹¤.<br>
        ë§¤ì›” <span class="highlight">1ì¼</span> ì‚¬ìš©ì‹œê°„ì´ ì´ˆê¸°í™” ë©ë‹ˆë‹¤.
      </p>
      <hr>
      <p class="remaining-time">
        ì´ë²ˆë‹¬ ë°©ë¬¸ ì˜ˆì•½ ê°€ëŠ¥í•œ<br>
        <strong>ì£¼ì°¨ì‹œê°„ì´ <span class="highlight" id="remainingTime">--</span> ë‚¨ì•˜ìŠµë‹ˆë‹¤.</strong>
      </p>
      <p class="monthly-limit">
        <span>ëˆ„ì  ì‚¬ìš©ì‹œê°„ : </span>
         <strong> <span class="highlight" id="accmltTime">--</span> </strong>
      </p>
    </div>
  </div>
</section>

<!-- ì˜ˆì•½ ëª¨ë‹¬ -->
 <div class="modal fade cute-modal" id="reserveModal" tabindex="-1" aria-labelledby="reserveModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="reserveModalLabel"><i class="fas fa-car"></i> ë°©ë¬¸ì°¨ëŸ‰ ì˜ˆì•½</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
         </div>
         <div class="modal-body">
            <form id="reserveForm" method="post">
               <div class="mb-3">
                  <label>ì°¨ëŸ‰ ë²ˆí˜¸</label>
                  <input type="text" name="vhcleNo" class="form-control" placeholder="ì˜ˆ: 12ê°€3456" required>
               </div>
               <div class="mb-3">
                  <label>ì…ì°¨ ì‹œê°„</label>
                  <input type="datetime-local" name="startDt" class="form-control" step="3600" required>
               </div>
               <div class="mb-3">
                  <label>ì¶œì°¨ ì‹œê°„</label>
                  <input type="datetime-local" name="endDt" class="form-control" step="3600" required>
               </div>
               <div class="text-center mt-4">
                  <button type="submit" class="btn btn-primary reserve-btn">ì˜ˆì•½ ì™„ë£Œ</button>
               </div>
            </form>
         </div>
      </div>
   </div>
</div> 
<!-- ë°©ë¬¸ì°¨ëŸ‰ ì˜ˆì•½ ëª¨ë‹¬ -->
<!--ë°©ë¬¸ì°¨ëŸ‰ì˜ˆì•½ ë -->

<!-- //////////////////////////íˆ¬í‘œ Section//////////////////////////// -->
<section id="vote" class="services-2 section light-background" data-aos="fade-up" data-aos-delay="400">
   <!-- Section Titleì‹œì‘ -->
<div class="container section-title" data-aos="fade-up" style="padding-bottom: 15px;">
	<div class="title-row">
      <h2>ìµœê·¼ íˆ¬í‘œ</h2>
      <a type="button" class="btn btn-success" href="/vote/memVoteList"
         style="background-color: rgba(135, 163, 179, 0.7); border: 2px solid rgb(135, 163, 179);">
         íˆ¬í‘œ ë³´ëŸ¬ê°€ê¸°</a>
   </div>
</div>
   <!-- Section Titleë -->

   <div class="card" style="margin: 8px; padding: 5px; border: 3px solid rgba(100, 140, 164, 0.75); border-radius: 14px;">
      <!-- ëª©ë¡ -->
      <div class="mobile-list" style="margin: 5px;">
         <c:forEach var="p" items="${votePage.content}" varStatus="stat">

            <c:set var="badgeClass" value="bg-light text-muted" />
            <c:if test="${p.stat eq 'ì§„í–‰ì¤‘'}">
               <c:set var="badgeClass" value="bg-success" />
            </c:if>
            <c:if test="${p.stat eq 'ì˜ˆì •'}">
               <c:set var="badgeClass" value="bg-secondary" />
            </c:if>
            <c:if test="${p.stat eq 'ë§ˆê°'}">
               <c:set var="badgeClass" value="bg-warning text-dark" />
            </c:if>

            <div class="card mb-2 shadow-sm border-0 open-vote" data-sn="${p.voteMtrSn}" style="cursor:pointer;">
               <div class="card-body py-3 px-3">
                  <!-- ì œëª©/ìƒíƒœ -->
                  <div class="d-flex justify-content-between align-items-start gap-2">
                        <div class="fw-semibold text-truncate" style="max-width: 100%;">
                            <!-- ê¸€ë²ˆí˜¸ -->
                            <span class="badge bg-secondary text-white rounded-pill px-2">${(articlePage.currentPage-1) * 10 + stat.count}</span> 
                            ${p.mtrSj}
                         </div>
                   <span class="badge ${badgeClass}">${p.stat}</span>
               </div>

                  <!-- ê¸°ê°„ -->
                  <div class="small text-muted mt-1"><i class="bi bi-calendar-check"></i>
                     ${fn:substring(p.voteBeginDt, 0, 10)} ~ ${fn:substring(p.voteEndDt, 0, 10)}
                  </div>

                  <!-- ì¸ì›/ì°¸ì—¬ì—¬ë¶€ -->
                  <div class="d-flex justify-content-between align-items-center mt-2">
                     <div class="small"> íˆ¬í‘œì¸ì›: <span class="fw-semibold"><c:out value="${p.votedNum}" /></span>
                     </div>
                     <div>
                        <c:choose>
                           <c:when test='${p.isVoted eq "ì°¸ì—¬"}'>
                              <span class="badge bg-info">ì°¸ì—¬ì™„ë£Œ</span>
                           </c:when>
                           <c:otherwise>
                              <span class="badge bg-light text-danger">ë¯¸ì°¸ì—¬</span>
                           </c:otherwise>
                        </c:choose>
                     </div>
                  </div>
               </div>
            </div>
         </c:forEach>
      </div>
      </div>
</section>
<!-- modalì‹œì‘ : íˆ¬í‘œ ìƒì„¸ -->
<div class="modal fade" id="goVoteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <!-- ìƒë‹¨ í—¤ë” -->
      <div class="modal-header">
        <div class="d-flex align-items-center gap-2">
          <!-- ìˆœë²ˆ í‘œì‹œ -->
          <span class="task-chip">
            <span class="me-1">íˆ¬í‘œ</span>
          </span>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- ë³¸ë¬¸ -->
      <div class="modal-body">
        <div class="task-panel">

          <!-- ì œëª© ì˜ì—­ -->
          <div class="mb-2">
            <span class="task-meta-label">ì œëª©</span>
            <input type="text"
                   id="md-mtrSj"
                   class="form-control form-control-sm border-0 bg-transparent px-0"
                   style="font-size:.95rem; font-weight:600;"
                   readonly>
          </div>

          <!-- ì‘ì„±ì / ê¸°ê°„ / ìƒíƒœ -->
          <div class="task-meta-grid">
            <div>
              <span class="task-meta-label">íˆ¬í‘œ ê¸°ê°„</span>
              <input type="text" id="md-voteTime"
                     class="form-control form-control-sm" readonly>
            </div>
          </div>

          <!-- ë‚´ìš© / ê·¸ë˜í”„  -->
          <div class="task-split">
            <!-- ë‚´ìš© -->
            <div class="task-section">
              <div class="task-section-title">íˆ¬í‘œ ë‚´ìš©</div>
              <textarea id="md-mtrCn"
                        class="form-control form-control-sm task-description"
                        rows="5"
                        style="resize:none;"
                        readonly></textarea>
            </div>

            <!-- ê·¸ë˜í”„ -->
            <div class="task-section">
              <div class="task-section-title">íˆ¬í‘œ ê²°ê³¼</div>
              <div id="voteGraph"></div>
            </div>
          </div>

          <!-- íˆ¬í‘œ í•­ëª© -->
          <div class="task-table-wrap">
            <div class="task-table-header">
              <h6>íˆ¬í‘œ í•­ëª©</h6>
              <small>í•­ëª©ì„ ì„ íƒ í›„ íˆ¬í‘œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</small>
            </div>

            <div class="px-2 pt-1 pb-2">
              <form id="frmVote" method="post" action="/vote/haveAVote">
                <input type="hidden" name="voteMtrSn" id="md-voteMtrSn-hidden">

                <div class="table-responsive">
                  <table id="voteIemTable"
                         class="table table-sm table-hover align-middle">
                    <thead>
                      <tr>
                        <th style="width:10%;">ìˆœë²ˆ</th>
                        <th style="width:25%;">íˆ¬í‘œ í•­ëª©</th>
                        <th style="width:45%;">ë‚´ìš©</th>
                        <th style="width:10%;">íˆ¬í‘œ</th>
                        <th style="width:10%;">íˆ¬í‘œìˆ˜</th>
                      </tr>
                    </thead>
                    <tbody id="md-iem-tbody"></tbody>
                  </table>
                </div>

                <!-- ë²„íŠ¼ ì˜ì—­ -->
                <div class="d-flex justify-content-end gap-2 mt-2">
                  <button type="button"
                          class="btn btn-light btn-sm"
                          data-bs-dismiss="modal"
                          style="padding:.35rem .7rem; border-radius:10px;">
                    ë‹«ê¸°
                  </button>
                  <button type="submit"
                          class="btn btn-info btn-sm"
                          style="padding:.35rem .7rem; border-radius:10px;">
                    <i class="far fa-envelope"></i> íˆ¬í‘œí•˜ê¸°
                  </button>
                </div>
              </form>
            </div>
          </div>

        </div>
      </div>

      <!-- í‘¸í„°  -->
      <div class="modal-footer"></div>
    </div>
  </div>
</div>
<!--íˆ¬í‘œì˜ ëª¨ë‹¬ë-->

<!-- í•˜ë‹¨ info ì‹œì‘ -->
<section id="info-section" class="footer-info dark-background" style="padding: 20px 0 !important;">
    <div class="container footer-top">
        <div class="row gy-4">

            <div class="col-12">
				 <a href="http://localhost:8020/login" class="logo d-flex align-items-center" style="width: 100%; display: flex; justify-content: space-between; align-items: center;">                	
				                	<img src="/images/logo/dreamneerLogo(1).png" style="height:50px;">
				<!--                     <span class="sitename" style="font-size: 1.6rem; font-weight: 700; letter-spacing: 1px; line-height: 1.2;">DREAMNEER</span> -->
				<!--                     <span class="sitenameSm" style="font-size: 0.85rem; font-weight: 300; letter-spacing: 2.5px; opacity: 0.75;  white-space: nowrap;">DREAM BEYOND</span> -->
				                </a>
                <div class="footer-contact pt-3">
                    <p class="mt-3"><strong>Team:</strong> <span style="font-size: 0.85rem;">ê¹€ìš°í˜„ Â· ê³½ì •ì› Â· ê¹€ë³‘í˜¸ Â· ë‚˜í˜œì„  Â· ë°•ì‹œí˜„ Â· ë°±ì§€ì›… Â· ì†¡ì¸ì„  Â· ì´ìŠ¹ì£¼</span></p>
                    <p class="mt-3"><strong>Addr:</strong> <span style="font-size: 0.85rem;">ëŒ€ì „ê´‘ì—­ì‹œ ì¤‘êµ¬ ê³„ë£¡ë¡œ 846, 3-4ì¸µ</span></p>
                    <p class="mt-3"><strong>Phone:</strong> <span style="font-size: 0.85rem;">042-222-8202</span></p>
                    <p><strong>Email:</strong> <span style="font-size: 0.85rem;">DPyunHan@ddit.com</span></p>
                </div>
                <div class="social-links d-flex mt-4">
                    <a href="https://www.youtube.com/channel/UC-Q4WCYdovIVVj4WxVC11kg"><img src="images/logo/YouTube.png" alt="ìœ íŠœë¸Œ" style="width:32px; height:24px; margin-right: 12px;"></a>
                    <a href="https://www.ddit.or.kr/"><img src="images/logo/Internet.png" alt="ì¸í„°ë„·" style="width:24px; height:24px; margin-right: 12px;"></a>
                    <a href="https://blog.naver.com/dditorkr"><img src="images/logo/naverBlog.png" alt="ë¸”ë¡œê·¸" style="width:24px; height:24px; margin-right: 12px;"></a>
                    <a href="https://cafe.naver.com/dditorkr"><img src="images/logo/naverCafe.png" alt="ì¹´í˜" style="width:24px; height:24px; "></a>
                    
                    <div class="ms-auto d-flex">
                       <a href="./dPyunHan/termsofService" style="font-size: 0.9rem; margin-right: 12px; white-space: nowrap; color: #fff;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                       <a href="./dPyunHan/privacyPolicy" style="font-size: 0.9rem; white-space: nowrap; color: #fff;">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</a>
                   </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container copyright text-center mt-4">
        <p>Â© <span>Copyright</span> <strong class="px-1 sitename">DREAMNEER</strong> <span>All Rights Reserved</span></p>
        <div class="credits">
			Designed by <a href="http://localhost:8020/login" style="color:  #0ABCDD;"><strong>DREAMNEER</strong></a>
			Distributed by <a href="https://www.ddit.or.kr/" style="color:  #0ABCDD;"><strong>(ì¬)ëŒ€ë•ì¸ì¬ê°œë°œì›</strong></a>
        </div>
    </div>
</section>

<!-- ì°¨ëŸ‰ë“±ë¡ script -->
<script type="text/javascript" src="/js/main/visitVhcle.js"></script>
<link rel="stylesheet" href="/css/main/visitReserve.css">
<link rel="stylesheet" href="/css/main/levy.css">
<!-- ì°¨ëŸ‰ë“±ë¡ scriptë -->

<!--ì£¼ë¯¼ê³µì§€ì‚¬í•­ scriptì‹œì‘-->
<script type="text/javascript" src="/js/main/notice.js"></script>
<link rel="stylesheet" href="/css/main/notice.css">
<link rel="stylesheet" href="/css/main/noticeModal.css">
<!--ì£¼ë¯¼ê³µì§€ì‚¬í•­ scriptë-->

<!-- /////í¸ì˜ì‹œì„¤ ì˜ˆì•½///// -->
<script type="text/javascript" src="/js/main/resve.js"></script>
<link rel="stylesheet" href="/css/main/resve.css">
<!-- /////í¸ì˜ì‹œì„¤ ì˜ˆì•½ë///// -->

<!-- /////ê´€ë¦¬ë¹„ì¡°íšŒ///// -->
<script type="text/javascript" src="/js/main/managect.js"></script>
<!-- /////ê´€ë¦¬ë¹„ì¡°íšŒ ì½”ë“œë///// -->

<!-- fx ì¼ì • ìº˜ë¦°ë” ì‹œì‘ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/6.1.19/index.global.min.js"></script>
<!-- ì¼ì • ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ ì‹œì‘ -->
<link rel="stylesheet" href="/css/main/calendar.css">
<!-- ì¼ì • ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ ë -->
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
   //ìº˜ë¦°ë” í—¤ë” ì˜µì…˜
   const headerToolbar = {
      left : 'prevYear,prev,next,nextYear today',
      center : 'title',
      right : 'dayGridMonth,dayGridWeek,timeGridDay'
   }
   // ìº˜ë¦°ë” ìƒì„± ì˜µì…˜(ì°¸ê³µ)
   const calendarOption = {
      height : '700px', // calendar ë†’ì´ ì„¤ì •
      expandRows : true, // í™”ë©´ì— ë§ê²Œ ë†’ì´ ì¬ì„¤ì •
      slotMinTime : '09:00', // Day ìº˜ë¦°ë” ì‹œì‘ ì‹œê°„
      slotMaxTime : '18:00', // Day ìº˜ë¦°ë” ì¢…ë£Œ ì‹œê°„
      // ë§¨ ìœ„ í—¤ë” ì§€ì •
      headerToolbar : headerToolbar,
      initialView : 'dayGridMonth', // default: dayGridMonth 'dayGridWeek', 'timeGridDay', 'listWeek'
      locale : 'ko', // ì–¸ì–´ ì„¤ì •
      selectable : false, // ì˜ì—­ ì„ íƒ
      selectMirror : true, // ì˜¤ì§ TimeGrid viewì—ë§Œ ì ìš©ë¨, default false
      navLinks : true, // ë‚ ì§œ,WeekNumber í´ë¦­ ì—¬ë¶€, default false
      weekNumbers : false, // WeekNumber ì¶œë ¥ì—¬ë¶€, default false
      editable : false, // ì…ì£¼ë¯¼ì€ ìˆ˜ì • ë¶ˆê°€ 
      dayMaxEventRows : true, // Row ë†’ì´ë³´ë‹¤ ë§ìœ¼ë©´ +ìˆ«ì more ë§í¬ ë³´ì„!
      nowIndicator : true,
      events : function(info, successCallback,
            failureCallback) {
         const url = "/fx/listAjax";
         $.ajax({
            url : url,
            contentType : "application/json",
            type : 'get',
            dataType : 'json',
            success : function(param) {
               var events = [];
               console.log("param : ", param);
               $.each(param, function(index, data) {
                  console.log("data : ", data);
                  //êµ¬ë¶„(ì‹œì„¤,ì»¤ë®¤ë‹ˆí‹°,ì¼ì •)ì— ë”°ë¼ ìƒ‰ìƒ ë‹¤ë¥´ê²Œ ë°˜ì˜
                  let bgColor = "";
                  let texColor="white";

                  switch(data.fxIem){
                  case "ì‹œì„¤":
                	  bgColor="plum";
                	  texColor= "blueviolet";
                	  break
                    case "ì»¤ë®¤ë‹ˆí‹°":
                         bgColor="lightblue";
                         texColor="#787878";
                         break;
                  }
                  events.push({
                     id : data.schdulSn,
                     title : data.fxSj,
                     start : data.fxBeginDt,
                     end : data.fxEndDt,
                     allDay : false,
                     backgroundColor : bgColor, //ë°°ê²½ìƒ‰
                     textColor : texColor, //ê¸€ììƒ‰
                     extendedProps : { //ì¶”ê°€ ë°ì´í„°
                        empId : data.empId,
                        fxIem : data.fxIem,
                        fxCn : data.fxCn,
                        fxPlace : data.fxPlace
                     }
                  });
               })
               successCallback(events);
            }
         });
      }
   }
   const calendarEl = document.querySelector("#calendar");
   // ìº˜ë¦°ë” ìƒì„±
   const calendar = new FullCalendar.Calendar(calendarEl,
         calendarOption);
   // ëª¨ë‹¬ ì¸ìŠ¤í„´ìŠ¤
   const modalEl = document
         .getElementById("calendarModal");
   const modal = bootstrap.Modal
         .getOrCreateInstance(modalEl);
   //ì¼ì • í´ë¦­ ì‹œ ìƒì„¸ë³´ê¸°
   calendar.on("eventClick", function(info) { //info:fullcalendarê°€ eventë¥¼ í´ë¦­í–ˆì„ë•Œ ìë™ìœ¼ë¡œ ì „ë‹¬í•´ì£¼ëŠ” ê°ì²´
                  console.log("info.event: ", info.event);
                  const period = info.event;
                  console.log("period.extendedProps: ", period.extendedProps);
                  document.getElementById("calendarempId").value = period.extendedProps.empId;
                  document.getElementById("calendarSj").value = period.title;
                  document.getElementById("calendarIem").value = period.extendedProps.fxIem;
                  document.getElementById("calendarBeginDt").value = period.startStr.substring(0, 16);
                  document.getElementById("calendarEndDt").value = period.endStr.substring(0, 16);
                  document.getElementById("calendarCn").value = period.extendedProps.fxCn;
                  document.getElementById("calendarPlace").value = period.extendedProps.fxPlace;
                  modal.show();
               });
   // ìº˜ë¦°ë” ê·¸ë¦¬ê¸°
   calendar.render();

}); //ì „ì²´ ë
</script>
<!-- fx ì¼ì • ìº˜ë¦°ë” ë -->

<!-- vote íˆ¬í‘œ ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘ -->
<script type="text/javascript" src="/js/main/vote.js"></script>
<!-- íˆ¬í‘œ ê·¸ë˜í”„ ê·¸ë¦¬ëŠ”ê±°ì…ë‹ˆë‹¤ ì‹œì‘ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°ê°€ .jsíŒŒì¼ë¡œ ì˜®ê²¼ì„ ë•Œ ì‘ë™ì„ ì•ˆí•©ë‹ˆë‹¤. -->
<script src='https://cdn.plot.ly/plotly-3.2.0.min.js'></script>
<script>
//ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘
document.addEventListener("DOMContentLoaded", function() {
   function drawVoteGraph() {
      //  íˆ¬í‘œ í•­ëª© í…Œì´ë¸”ì—ì„œ ë°ì´í„° ì½ì–´ì˜¤ê¸°
      const rows = document.querySelectorAll("#voteIemTable tbody tr");
      const labels = []; // íˆ¬í‘œ í•­ëª©ëª… (iemNm)
      const values = []; // íˆ¬í‘œìˆ˜ (cnt)

      rows.forEach(function(row) {
         const cells = row.querySelectorAll("td");

         // ì—†ëŠ” í–‰ ê±´ë„ˆë›°ê¸°
         if (cells.length < 5)
            return;

         // ìˆœë²ˆ, íˆ¬í‘œí•­ëª©, ë‚´ìš©, íˆ¬í‘œìˆ˜
         const label = cells[1].textContent.trim(); // íˆ¬í‘œí•­ëª©
         const valueText = cells[4].textContent.trim(); // íˆ¬í‘œìˆ˜ ë¬¸ìì—´
         const value = parseInt(valueText.replace(/,/g,""), 10) || 0;

         labels.push(label);
         values.push(value);
      });

      // ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì•ˆë‚´ ë¬¸êµ¬ë§Œ ì¶œë ¥
      if (labels.length === 0) {
         const div = document.getElementById("voteGraph");
         if (div) {
            div.innerHTML = "<p style='text-align:center; margin-top:1rem;'>íˆ¬í‘œ í•­ëª© ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
         }
         return;
      }

      // ë°ì´í„°
      const data = [ {
         values : values,
         labels : labels,
         type : "pie",
         textinfo : "none",
         hoverinfo : "label+value+percent",
         hole : 0.1, // ë„ë„› í˜•íƒœ
         marker:{ line: {width: 0} }
      // marker: { colors: [...] } // ìƒ‰ìƒì§€ì •ê°€ëŠ¥
      } ];
      // ë ˆì´ì•„ì›ƒ ì„¤ì •
      const layout = {
         title : "íˆ¬í‘œ ê²°ê³¼",
         height : 200,
         width : 260,
         legend : {
            orientation : "h",
            x : 0.5,
            xanchor : "center",
            y : -0.15
         },
         margin : {
            t : 40,
            l : 10,
            r : 10,
            b : 40
         }
      };
      // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
      Plotly.newPlot("voteGraph", data, layout, {
         displayModeBar: false,  // ëª¨ë“œë°” ì „ì²´ ì œê±°
         displaylogo: false,      // Plotly ë¡œê³  ì œê±°
      });
   }
   const voteModalEl = document.getElementById("goVoteModal");
   if (voteModalEl) {
      voteModalEl.addEventListener("shown.bs.modal",function() {
               drawVoteGraph();
            });
   }
	
	
});
</script>
<!-- ê·¸ë˜í”„ ê·¸ë¦¬ëŠ”ê±°ì…ë‹ˆë‹¤ ë -->
<link rel="stylesheet" href="/css/main/vote.css">
<!-- vote íˆ¬í‘œ ìŠ¤í¬ë¦½íŠ¸ ë -->

<!-- í‘¸í„° -->
<%@ include file="./include/footerContents.jsp"%>
